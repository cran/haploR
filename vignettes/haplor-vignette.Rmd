---
title: 'Using haploR, an R package for querying HaploReg and RegulomeDB'
author: "Ilya Y. Zhbannikov"
date: "`r date()`"
output: html_document
vignette: >
  %\VignetteIndexEntry{Tutorial for haploR package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


## Overview

HaploReg <http://archive.broadinstitute.org/mammals/haploreg/haploreg.php> and 
RegulomeDB <http://www.regulomedb.org>
are web-based tools that extracts biological information such as eQTL, 
LD, motifs, etc. from large genomic projects such as ENCODE, 
the 1000 Genomes Project, Roadmap Epigenomics Project and others. 
This is sometimes called "post-GWAS" analysis.

The R-package \texttt{haploR} was developed to query 
those tools (HaploReg and RegulomeDB) directly from 
\texttt{R} in order to facilitate high-throughput 
genomic data analysis. Below we provide several examples 
that show how to work with this package.

Note: you must have a stable Internet connection 
to use this package.

Contact: <ilya.zhbannikov@duke.edu> for questions of 
usage the \texttt{haploR} or any other issues.



## Installation of \emph{haploR} package

In order to install the \emph{haploR} package, the user must first install R <https://www.r-project.org>. After that, \emph{haploR} (its developer version) can be installed with:

```{r, echo=TRUE, eval=FALSE}
devtools::install_github("izhbannikov/haplor", buildVignette=TRUE)
```

## Examples

### Querying HaploReg
#### One or several genetic variants

```{r, echo=TRUE, message=FALSE}
library(haploR)
results <- queryHaploreg(query=c("rs10048158","rs4791078"))
head(results)
```

Here \texttt{query} is a vector with names of genetic variants. 
\texttt{results} are the table similar to the output of HaploReg.

#### Uploading file with variants

If you have a file with your SNPs you would like 
to analyze (one SNP per line), you can 
supply it on an input as follows:

```{r, echo=TRUE, message=FALSE}
library(haploR)
results <- queryHaploreg(file=system.file("extdata/snps.txt", package = "haploR"))
head(results)
```

#### Using existing studies

Sometimes you would like to explore results from 
already performed study. In this case you should 
first the explore existing studies from 
HaploReg web site and then use one of 
them as an input parameter. See example below:

```{r, echo=TRUE, message=FALSE}
library(haploR)
# Getting a list of existing studies:
studies <- getStudyList()
# Let us look at the first element:
studies[[1]]
# Let us look at the second element:
studies[[2]]
# Query Hploreg to explore results from 
# this study:
results <- queryHaploreg(study=studies[[2]])
head(results)
```

### Querying RegulomeDB

```{r, echo=TRUE, message=FALSE}
library(haploR)
data <- queryRegulome(c("rs4791078","rs10048158"))
head(data)
```


## Session information
```{r, echo=TRUE}
sessionInfo()
```
